<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/Other/html.html to edit this template
-->
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
    <head th:replace="~{layout/fragments :: head}">
        <title>Bienes Raices</title>
    </head>
    <body>



        <!-- Section to save Seller it will call a modal window -->

        <section th:fragment="addProperty" class="form-add-property-container">
           
            <form th:action="@{/properties/save}" th:object="${property}" method="POST" class="was-validated"enctype="multipart/form-data">
                <a th:href="@{/properties/list}"><i class="fa-solid fa-arrow-left"></i></a>
                <h1>Agregar Propiedad</h1>
                <div class="input-form-add-property">
                    <label for="name">Nombre:</label>
                    <input type="text" class="form-control" name="name" id="name" required="true"/>
                </div>
                <div class="input-form-add-property">
                    <label for="price">Precio:</label>
                    <input type="number" class="form-control" name="price" id="price" required="true"/>
                </div>
                <div class="input-form-add-property">
                    <label for="owner">Dueño:</label>
                    <input type="text" class="form-control" name="owner" id="owner" required="true"/>
                </div>
                <div class="input-form-add-property">
                    <label for="transactionType">Tipo de transacción:</label>
                    <input type="text" class="form-control" name="transactionType" id="transactionType" required="true"/>
                </div>
                <div class="input-form-add-property">
                    <label for="antiquity">Antigüedad de la construcción</label>
                    <input type="number" class="form-control" name="antiquity" id="antiquity" required="true"/>
                </div>
                <div class="input-form-add-property">
                    <div class="inputs-address">
                        <div>
                            <div>
                                <label for="canton">Canton:</label>
                                <input type="text" class="form-control" th:field="*{address.canton}" id="canton" required="true"/>
                            </div>
                            <div>
                                <label for="street">Calle:</label>
                                <input type="text" class="form-control" th:field="*{address.street}" id="street" required="true"/>
                            </div>
                            <div>
                                <label for="address">Provincia:</label>
                                <select id="province" name="province" class="form-control" required="true" th:field="*{address.province}" th:onchange>
                                    <option value="0">Seleccione</option>
                                    <option value="Cartago">Cartago</option>
                                    <option value="San José">San José</option>
                                    <option value="Alajuela">Alajuela</option>
                                    <option value="Limón">Limón</option>
                                    <option value="Guanacaste">Guanacaste</option>
                                    <option value="Heredia">Heredia</option>
                                    <option value="Puntarenas">Puntarenas</option>
                                </select>
                            </div>
                        </div>
                        <div>
                            <label for="otherSigns">Otras señas:</label>
                            <textarea id="otherSigns" class="form-control" th:field="*{address.othersSigns}" rows="5" cols="10" ></textarea>
                        </div>
                    </div>
                </div>
                <div class="input-form-add-property">
                    <label for="descripcion">Descripción:</label>
                    <textarea id="descripcion" class="form-control" th:field="*{characteristics.description}" rows="5" cols="10" ></textarea>
                </div>
                <div class="input-form-add-property">
                    <label for="numberBathrooms">Número de Baños:</label>
                    <input type="number" class="form-control" th:field="*{characteristics.numberBathrooms}" required="true"/>
                </div>
                <div class="input-form-add-property">
                    <label for="numberRooms">Número de Habitaciones:</label>
                    <input type="number" class="form-control" th:field="*{characteristics.numberRooms}" id="numberRooms" required="true"/>
                </div>
                <div class="input-form-add-property">
                    <div>
                        <label for="pool">Piscina</label>
                        <input type="checkbox" id="pool" th:field="*{characteristics.garage}"/>
                    </div>
                    <div>
                        <label for="garage">Cochera</label>
                        <input type="checkbox" th:field="*{characteristics.garage}" id="garage"/>
                    </div>
                </div>
                <div class="input-form-add-property">
                    <label for="agent">Agente:</label>
                    <select id="agent" name="agent" class="form-control" required="true" th:field="*{agent.idAgent}">
                        <option value="0">Seleccione</option>
                        <option th:each="agent : ${agents}" th:value="${agent.idAgent}">[[${agent.user.name}]] [[${agent.user.firstSurName}]] [[${agent.user.firstSurName}]] ([[${agent.user.identification}]])</option>
                    </select>
                </div>
                <div class="input-form-add-property">
                    <label for="imagen">Imagenes de la Propiedad:</label>
                    <input class="form-control" type="file" name="imageFile" onchange="readURL(this);" multiple />
                    <img src="" alt="">
                </div>


                <button class="button-save-property" >Guardar</button>
            </form>
        </section>


        <div class="add-button-container" th:fragment="addButton">
            <a th:href="@{/properties/new}" class="add-button">Agregar +</a>
        </div>


        <!--Section PropertyList: Show all properties List in the Web App-->
        <div th:fragment="propertyList" class="properties">
            <h1>Propiedades</h1>
            <div class="property" th:each="property : ${properties}">
                <img th:src="${property.images[0].image}" alt="">
                <div class="property-info">
                    <h3>[[${property.name}]]</h3>
                    <h4>¢[[${property.price}]]</h4>
                    <p>Dueño: [[${property.owner}]]</p>
                    <p>Antigüedad: [[${property.antiquity}]] años</p>
                    <a th:href="@{/properties/} + ${property.idProperty}">Más información <i class="fa-solid fa-arrow-right"></i></a>
                </div>
            </div>


            <div class="text-center p-2" th:if="${properties == null or properties.empty}">
                <span>Lista Vacia</span>
            </div>
        </div>

        <div th:fragment="property" class="individual-property">
            <a th:href="@{/properties/list}"><i class="fa-solid fa-arrow-left"></i></a>
            <div class="slideshow-container">

                <div class="mySlides" th:each="image : ${property.images}">
                  <img th:src="${image.image}" style="width:100%">
                </div>
                <a class="prev" onclick="plusSlides(-1)"><i class="fa-solid fa-angle-left"></i></a>
                <a class="next" onclick="plusSlides(1)"><i class="fa-solid fa-angle-right"></i></a>
             
              
              <div style="text-align:center">
                <span class="dot" th:attr="onclick='currentSlide(' + ${counter.count} + ')'" th:each="image, counter: ${property.images}"></span>
              </div>
            </div>
            <div class="property-more-info">
                <h2>[[${property.name}]]</h2>
                <h4>¢[[${property.price}]]</h4>
                
                <h5>Dueño: [[${property.owner}]]</h>
                <h5>Agente encargado: [[${property.agent.user.name}]] [[${property.agent.user.firstSurName}]] [[${property.agent.user.secondSurName}]]</h5>
                
                <p>Antigüedad: [[${property.antiquity}]] años</p>
                <p>Modalidad de transacción: [[${property.transactionType}]]</p>
                
                <p>Ubicación: [[${property.address.province}]], [[${property.address.canton}]], [[${property.address.street}]], [[${property.address.othersSigns}]]</p>
                <hr>
                <h5>Características:</h5>
                <p>[[${property.characteristics.description}]]</p>
                <div class="short-characteristics">
                    <p><i class="fa-solid fa-toilet"></i> [[${property.characteristics.numberBathrooms}]]</p>
                    <p><i class="fa-solid fa-bed"></i> [[${property.characteristics.numberRooms}]]</p>
                    <p th:classappend="${property.characteristics.garage ? 'yes' : 'no'}"><i class="fa-solid fa-warehouse"></i> [[${property.characteristics.garage ? "Si" : "No"}]]</p>
                    <p th:classappend="${property.characteristics.pool ? 'yes' : 'no'}"><i class="fa-solid fa-water-ladder"></i> [[${property.characteristics.pool ? "Si" : "No"}]]</p>
                </div>
                <a class="contact-button" th:href="@{/}">Contactar</a>
            </div>
        </div>

    </body>
</html>
